// –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ12
// –¢–µ–º–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Observer)
// –í–∞—Ä–∏–∞–Ω—Ç 2: –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–æ–≥–æ–¥–µ

import java.util.*;

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è (–ø–æ–¥–ø–∏—Å—á–∏–∫–∞)
interface Observer {
    void update(String weather);
}

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–∑–¥–∞—Ç–µ–ª—è (—Ç–æ–≥–æ, –∑–∞ –∫–µ–º –Ω–∞–±–ª—é–¥–∞—é—Ç)
interface Subject {
    void addObserver(Observer o);
    void removeObserver(Observer o);
    void notifyObservers();
}

// –ö–ª–∞—Å—Å, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π "–ü–æ–≥–æ–¥—É" (–∏–∑–¥–∞—Ç–µ–ª—å)
class WeatherStation implements Subject {
    private List<Observer> observers = new ArrayList<>();
    private String weather;

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞
    @Override
    public void addObserver(Observer o) {
        observers.add(o);
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞
    @Override
    public void removeObserver(Observer o) {
        observers.remove(o);
    }

    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
    @Override
    public void notifyObservers() {
        for (Observer o : observers) {
            o.update(weather);
        }
    }

    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã
    public void setWeather(String weather) {
        this.weather = weather;
        System.out.println("\n–ü–æ–≥–æ–¥–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –Ω–∞: " + weather);
        notifyObservers();
    }
}

// –ö–ª–∞—Å—Å –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
class User implements Observer {
    private String name;

    public User(String name) {
        this.name = name;
    }

    @Override
    public void update(String weather) {
        System.out.println(name + " –ø–æ–ª—É—á–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: —Å–µ–π—á–∞—Å " + weather);
    }
}

// –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –ø—Ä–æ–≥—Ä–∞–º–º—ã
public class WeatherNotification {
    public static void main(String[] args) {
        // –°–æ–∑–¥–∞—ë–º "–ø–æ–≥–æ–¥–Ω—É—é —Å—Ç–∞–Ω—Ü–∏—é"
        WeatherStation weatherStation = new WeatherStation();

        // –°–æ–∑–¥–∞—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        User user1 = new User("–ê–ª–∏–Ω–∞");
        User user2 = new User("–ú–∞–∫—Å–∏–º");
        User user3 = new User("–û–ª—è");

        // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        weatherStation.addObserver(user1);
        weatherStation.addObserver(user2);
        weatherStation.addObserver(user3);

        // –ú–µ–Ω—è–µ–º –ø–æ–≥–æ–¥—É
        weatherStation.setWeather("—Å–æ–ª–Ω–µ—á–Ω–æ ‚òÄÔ∏è");
        weatherStation.setWeather("–¥–æ–∂–¥–ª–∏–≤–æ üåßÔ∏è");

        // –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è
        weatherStation.removeObserver(user2);

        // –ï—â—ë –æ–¥–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã
        weatherStation.setWeather("—Å–Ω–µ–∂–Ω–æ ‚ùÑÔ∏è");
    }
}
